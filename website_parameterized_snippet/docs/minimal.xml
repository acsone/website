<openerp>
    <data>

        <template id="snippet_content_tmpl">
            <t t-set="variable" t-value="request.env['model'].model_function(myparameter)"/>
            <div t-if="variable">
                <t t-esc="variable.name"/>   
                <!--supposing that model_function returns a record with an attribute "name" -->
            </div>
        </template>


        <template id="my_parametric_widget" inherit_id="website.snippets" 
            name="my_param_widget">
            <xpath expr="//div[@id='snippet_content']" position="inside">
                <div>
                    <div class="oe_snippet_thumbnail">
                        <img class="oe_snippet_thumbnail_img" 
                            src="/module_name/image_path/img_name.png"/>
                        <span class="oe_snippet_thumbnail_title">Show parametric snippet</span>
                    </div>
                    <section class="oe_snippet_body jq_param_entry" >
                        <div class="parametricTemplate">
                            <!-- the template call code is injected via javascript 
                                   the class is parametricTemplate in order to 
                                   override odoo's normal behaviour 
                                   (no t tags allowed except for t-field) -->
                          </div>
                      </section>
                  </div>
              </xpath>

              <xpath expr="//div[@id='snippet_options']" position="inside">
                  <div data-snippet-option-id="param_entry" data-selector=".jq_parame_entry"
                      data-selector-siblings="p, h1, h2, h3, blockquote, .well, .panel, .oe_share"
                      data-selector-children=".content">
                      <li class="dropdown-submenu"    data-required="false">
                          <a tabindex="-1" href="#">CHOOSE </a>
                          <t t-set="records" t-value="request.env['mymodel'].search([])"/>
                          <ul class="dropdown-menu">
                              <li t-foreach="record" t-as="record"  data-value="record.id" class="dropdown-submenu">
                                  <ul class="dropdown-menu">
                                      <li t-attf-data-value="param_#{record.id}">
                                          <a><t t-esc="record.name" /></a>
                                      </li>
                                  </ul>
                              </li>
                          </ul>
                      </li>
                  </div>
              </xpath>
          </template>

      </data>
  </openerp>
